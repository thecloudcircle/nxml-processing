
<article xmlns:ali="http://www.niso.org/schemas/ali/1.0" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:mml="http://www.w3.org/1998/Math/MathML" article-type="research-article"><?properties open_access?><front><journal-meta><journal-id journal-id-type="nlm-ta">Sensors (Basel)</journal-id><journal-id journal-id-type="iso-abbrev">Sensors (Basel)</journal-id><journal-id journal-id-type="publisher-id">sensors</journal-id><journal-title-group><journal-title>Sensors (Basel, Switzerland)</journal-title></journal-title-group><issn pub-type="epub">1424-8220</issn><publisher><publisher-name>MDPI</publisher-name></publisher></journal-meta><article-meta><article-id pub-id-type="pmid">26343664</article-id><article-id pub-id-type="pmc">4610574</article-id><article-id pub-id-type="doi">10.3390/s150921204</article-id><article-id pub-id-type="publisher-id">sensors-15-21204</article-id><article-categories><subj-group subj-group-type="heading"><subject>Article</subject></subj-group></article-categories><title-group><article-title>vitisFlower<sup>&#x000ae;</sup>: Development and Testing of a Novel Android-Smartphone Application for Assessing the Number of Grapevine Flowers per Inflorescence Using Artificial Vision Techniques</article-title></title-group><contrib-group><contrib contrib-type="author"><name><surname>Aquino</surname><given-names>Arturo</given-names></name><xref ref-type="author-notes" rid="fn1-sensors-15-21204">&#x02020;</xref></contrib><contrib contrib-type="author"><name><surname>Millan</surname><given-names>Borja</given-names></name><xref ref-type="author-notes" rid="fn1-sensors-15-21204">&#x02020;</xref></contrib><contrib contrib-type="author"><name><surname>Gaston</surname><given-names>Daniel</given-names></name><xref ref-type="author-notes" rid="fn1-sensors-15-21204">&#x02020;</xref></contrib><contrib contrib-type="author"><name><surname>Diago</surname><given-names>Mar&#x000ed;a-Paz</given-names></name><xref ref-type="author-notes" rid="fn1-sensors-15-21204">&#x02020;</xref></contrib><contrib contrib-type="author"><name><surname>Tardaguila</surname><given-names>Javier</given-names></name><xref rid="c1-sensors-15-21204" ref-type="corresp">*</xref></contrib></contrib-group><contrib-group><contrib contrib-type="editor"><name><surname>Passaro</surname><given-names>Vittorio M. N.</given-names></name><role>Academic Editor</role></contrib></contrib-group><aff id="af1-sensors-15-21204">Instituto de Ciencias de la Vid y del Vino (University of La Rioja, CSIC, Gobierno de La Rioja), 26006 Logro&#x000f1;o, Spain; E-Mails: <email>arturo.aquino@unirioja.es</email> (A.A.); <email>borja.millanp@unirioja.es</email> (B.M.); <email>daniel.gaston@unirioja.es</email> (D.G.); <email>maria-paz.diago@unirioja.es</email> (M.-P.D.)</aff><author-notes><fn id="fn1-sensors-15-21204"><label>&#x02020;</label><p>These authors contributed equally to this work.</p></fn><corresp id="c1-sensors-15-21204"><label>*</label>Author to whom correspondence should be addressed; E-Mail: <email>javier.tardaguila@unirioja.es</email>; Tel.: +34-941-299-741; Fax: +34-941-299-720.</corresp></author-notes><pub-date pub-type="epub"><day>28</day><month>8</month><year>2015</year></pub-date><pub-date pub-type="collection"><month>9</month><year>2015</year></pub-date><volume>15</volume><issue>9</issue><fpage>21204</fpage><lpage>21218</lpage><history><date date-type="received"><day>01</day><month>7</month><year>2015</year></date><date date-type="accepted"><day>24</day><month>8</month><year>2015</year></date></history><permissions><copyright-statement>&#x000a9; 2015 by the authors; licensee MDPI, Basel, Switzerland.</copyright-statement><copyright-year>2015</copyright-year><license><license-p><!--CREATIVE COMMONS-->This article is an open access article distributed under the terms and conditions of the Creative Commons Attribution license (<ext-link ext-link-type="uri" xlink:href="http://creativecommons.org/licenses/by/4.0/">http://creativecommons.org/licenses/by/4.0/</ext-link>).</license-p></license></permissions><abstract><p>Grapevine flowering and fruit set greatly determine crop yield. This paper presents a new smartphone application for automatically counting, non-invasively and directly in the vineyard, the flower number in grapevine inflorescence photos by implementing artificial vision techniques. The application, called vitisFlower<sup>&#x000ae;</sup>, firstly guides the user to appropriately take an inflorescence photo using the smartphone&#x02019;s camera. Then, by means of image analysis, the flowers in the image are detected and counted. vitisFlower<sup>&#x000ae;</sup> has been developed for Android devices and uses the OpenCV libraries to maximize computational efficiency. The application was tested on 140 inflorescence images of 11 grapevine varieties taken with two different devices. On average, more than 84% of flowers in the captures were found, with a precision exceeding 94%. Additionally, the application&#x02019;s efficiency on four different devices covering a wide range of the market&#x02019;s spectrum was also studied. The results of this benchmarking study showed significant differences among devices, although indicating that the application is efficiently usable even with low-range devices. vitisFlower is one of the first applications for viticulture that is currently freely available on Google Play.</p></abstract><kwd-group><kwd>Android application</kwd><kwd>OpenCV4Android</kwd><kwd>OpenCV library</kwd><kwd>image analysis</kwd><kwd>grapevine flower counting</kwd><kwd>yield prediction</kwd><kwd><italic>Vitis vinifera</italic> L.</kwd><kwd>precision viticulture</kwd><kwd>precision agriculture</kwd></kwd-group></article-meta></front><body><sec id="sec1-sensors-15-21204"><title>1. Introduction</title><p>Precision agriculture proposes the development and use of new technologies for improving crop management and quality. In the field of viticulture, there has been an increasing interest over the last few years in the development of innovative image-based techniques for objective vineyard monitoring [<xref rid="B1-sensors-15-21204" ref-type="bibr">1</xref>,<xref rid="B2-sensors-15-21204" ref-type="bibr">2</xref>,<xref rid="B3-sensors-15-21204" ref-type="bibr">3</xref>,<xref rid="B4-sensors-15-21204" ref-type="bibr">4</xref>,<xref rid="B5-sensors-15-21204" ref-type="bibr">5</xref>,<xref rid="B6-sensors-15-21204" ref-type="bibr">6</xref>]. This approach would allow one to increase management efficiency by providing more accurate control of agronomic parameters. Undoubtedly, it would produce an outstanding positive impact on grape-growing sustainability, as well as on grape and wine quality.</p><p>Flowering and fruit set (rate of flowers becoming grapes) are two physiological processes that strongly determine grapevine yield [<xref rid="B7-sensors-15-21204" ref-type="bibr">7</xref>]. Furthermore, 30% of yield seasonal variation is associated with the number of berries per cluster and 60% with the number of clusters per vine [<xref rid="B8-sensors-15-21204" ref-type="bibr">8</xref>,<xref rid="B9-sensors-15-21204" ref-type="bibr">9</xref>], impacted by the pruning load and bud fruitfulness. The knowledge of the rate of fruit set at very early stages (prior to bunch closure) is of great value for grape growers, as this variable can be used to estimate or predict the final yield at harvest, provided a historical value of average berry weight, and the average cluster number per vine for each vineyard is available for each vineyard. Flowering and fruit set, together with berry size, have also a great impact on grape and wine quality, since they define the number of berries per cluster and contribute to determining the cluster architecture and compactness, which are a recognized key indicators of grape and wine quality [<xref rid="B10-sensors-15-21204" ref-type="bibr">10</xref>]. Due to their importance and multi-factorial variability [<xref rid="B7-sensors-15-21204" ref-type="bibr">7</xref>,<xref rid="B11-sensors-15-21204" ref-type="bibr">11</xref>,<xref rid="B12-sensors-15-21204" ref-type="bibr">12</xref>], there are a great number of viticultural actions aimed at controlling their behavior [<xref rid="B7-sensors-15-21204" ref-type="bibr">7</xref>,<xref rid="B13-sensors-15-21204" ref-type="bibr">13</xref>,<xref rid="B14-sensors-15-21204" ref-type="bibr">14</xref>,<xref rid="B15-sensors-15-21204" ref-type="bibr">15</xref>,<xref rid="B16-sensors-15-21204" ref-type="bibr">16</xref>,<xref rid="B17-sensors-15-21204" ref-type="bibr">17</xref>,<xref rid="B18-sensors-15-21204" ref-type="bibr">18</xref>,<xref rid="B19-sensors-15-21204" ref-type="bibr">19</xref>]. So far, flowering and fruit set cannot be accurately assessed, since manual flower counting is unfeasible, as it is extremely time and labor demanding, besides being mostly destructive.</p><p>The huge recent progress of mobile devices (also known as smartphones) has opened a wide range of opportunities that were previously unviable. Their portability, accessibility, computing performance and the high quality of the cameras they currently include are features that have enabled the development of innovative applications in fields, like medicine, sport, geography and agriculture, among others. Specifically, in viticulture, there are still not many examples of smartphone applications. One of them was recently presented by De Bei <italic>et al</italic>. [<xref rid="B20-sensors-15-21204" ref-type="bibr">20</xref>,<xref rid="B21-sensors-15-21204" ref-type="bibr">21</xref>]. These authors developed an application for measuring grapevine canopy architecture using image analysis techniques on images acquired with the device&#x02019;s camera. The application was developed exclusively for iOS smartphones, not being commercial yet.</p><p>The goal of the present work was to develop and to test the reliability and computational efficiency of a novel smartphone application, called vitisFlower<sup>&#x000ae;</sup>, for automatically, efficiently and non-invasively counting flowers in grapevine inflorescence images taken directly in the vineyard. This application benefits from the fact that the number of flowers in an inflorescence image is strongly correlated to the actual flower number in the real inflorescence [<xref rid="B22-sensors-15-21204" ref-type="bibr">22</xref>], to provide the user with a powerful tool for flowering assessment. The application, called vitisFlower<sup>&#x000ae;</sup>, was developed and implemented for Android devices with the aim of maximizing its availability to users, since this operating system is the most extended worldwide [<xref rid="B23-sensors-15-21204" ref-type="bibr">23</xref>]. The application was tested following a double approach. On the one hand, the application was tested by taking and analyzing 140 inflorescence images of 11 grapevine varieties using two different devices: a high-end and a mid-range device. In this way, not only its accuracy in detecting grapevine flowers was evaluated, but also its reliability to properly work on devices of different capabilities. On the second hand, the application&#x02019;s computational efficiency was also evaluated by performing a benchmarking study using four devices covering the whole market spectrum.</p></sec><sec id="sec2-sensors-15-21204"><title>2. Experimental Section</title><sec id="sec2dot1-sensors-15-21204"><title>2.1. Image Analysis for Flower Counting in Grapevine Inflorescences</title><p>vitisFlower<sup>&#x000ae;</sup> is a newly-developed application for Android devices that allows one to take a photo of a grapevine inflorescence for its analysis. This analysis, based on the methodology proposed and validated in [<xref rid="B22-sensors-15-21204" ref-type="bibr">22</xref>], implements artificial vision algorithms aimed at counting the number of flowers per inflorescence in the image.</p><p>The methodology for counting grapevine flowers is based on mathematical morphology and statistical techniques. It has a pre-requisite, which involves taking the photo by placing dark cardboard behind the inflorescence for allowing its segmentation from the background. Once the image is correctly acquired, the methodology can be divided into three steps:
<list list-type="simple"><list-item><label>-</label><p>Image pre-processing: this step basically consists of automatically segmenting the inflorescence from the background using color discrimination criteria (invariant to light conditions) for computing a region of interest (ROI).</p></list-item><list-item><label>-</label><p>Image analysis: in this step, the detection of flower candidates is achieved. Flowers are quasi-spherical in shape, so they produce a point of maximum light reflection. Therefore, flower candidates are identified in the area of the image delimited by the ROI as those connected components being regional maxima in the lightness channel of the Lab color space (concretely the Lab space used was CIE 1976 L*a*b* [<xref rid="B24-sensors-15-21204" ref-type="bibr">24</xref>]).</p></list-item><list-item><label>-</label><p>Image post-processing: this final stage intends to remove those regional maxima not corresponding to real flowers in the image. It is carried out by sequentially applying these two statistical filters:
<list list-type="order"><list-item><p>Region size filter: removal of those candidates with a size larger than expected, taking into account the statistical size distribution of the candidates.</p></list-item><list-item><p>Shape filter: due to the geometry of a flower, the area of maximum light reflection on its surface is expected to describe a quasi-circular shape; therefore, this filter eliminates those candidates describing elongated configurations.</p></list-item></list></p></list-item></list></p><p>Once flower candidates are filtered, the remaining ones are definitely considered as real flowers and counted. As an example, <xref ref-type="fig" rid="sensors-15-21204-f001">Figure 1</xref>a shows a photo of a grapevine inflorescence on dark cardboard, whereas <xref ref-type="fig" rid="sensors-15-21204-f001">Figure 1</xref>b illustrates the result of its analysis by representing detected flowers with blue crosses.</p><fig id="sensors-15-21204-f001" position="float"><label>Figure 1</label><caption><p>(<bold>a</bold>) Grapevine photo taken in the vineyard using black cardboard as the background; (<bold>b</bold>) result of the image analysis algorithm overviewed in <xref ref-type="sec" rid="sec2dot1-sensors-15-21204">Section 2.1</xref> for automatically detecting flowers. Detected flower centers are marked with blue crosses.</p></caption><graphic xlink:href="sensors-15-21204-g001"/></fig></sec><sec id="sec2dot2-sensors-15-21204"><title>2.2. Application&#x02019;s Technical Overview</title><p>The vitisFlower<sup>&#x000ae;</sup> application integrates the image analysis methodology previously described with the image capture process and the results storage to provide vine growers with a unique and comprehensive tool for counting grapevine flowers in the vineyard. For its implementation, technical and design decisions were taken for finding the best trade-off between accessibility, efficiency and portability.</p><p>With the aim of maximizing the availability of the application to potential users, the first technical decision was its development for Android-powered smartphones and tablets, since this operating system is the dominant one in the mobile-device market worldwide [<xref rid="B23-sensors-15-21204" ref-type="bibr">23</xref>]. In addition, this accessibility was also favored by guaranteeing the compatibility of its implementation with Android Version 2.3 and above.</p><p>As discussed, the selection of Android as the operating system provides outstanding accessibility advantages. On the contrary, it also implies certain limitations in terms of efficiency and versatility for the needs of this work, especially for the implementation of the image analysis algorithms. In this respect, OpenCV is a highly optimized library, written in C/C++, that offers a wide catalogue of image processing and analysis functions. Android applications are mainly developed in Java, with an existing Android version of this library called OpenCV4Android. However, the original C/C++ version was used instead of its Android version to implement the core of the image analysis methodology due to the following reasons:
<list list-type="bullet"><list-item><p>The use of OpenCV4Android through Java code introduces limitations in image handling, which influence efficiency. In this respect, C/C++ provides higher versatility than Java, allowing image handling at lower levels. </p></list-item><list-item><p>The power and versatility that is offered by C/C++ pointers allows one to reduce memory usage by reducing image and other variable copies. This advantage considerably helped to keep the application within the standard Android heap size.</p></list-item><list-item><p>The implementation of the core using the standard C/C++ OpenCV library instead of its Android version outstandingly increases its portability, since there are OpenCV compilations for numerous operating systems, like iOS and Windows, among others.</p></list-item><list-item><p>The use of the standard C/C++ OpenCV for implementing the image analysis algorithms facilitates their development and testing, since it can be carried out directly on a PC, avoiding the need for the use of smartphones or emulators to this effect.</p></list-item></list></p><p>The inclusion of the C/C++ OpenCV library for implementing the core of image analysis algorithms highly influenced the application&#x02019;s architecture design, as can be seen in <xref ref-type="fig" rid="sensors-15-21204-f002">Figure 2</xref>.</p><fig id="sensors-15-21204-f002" position="float"><label>Figure 2</label><caption><p>Architecture design of the vitisFlower<sup>&#x000ae;</sup> Android application.</p></caption><graphic xlink:href="sensors-15-21204-g002"/></fig><p>The application&#x02019;s architecture was basically composed of two blocks, one implemented in Java and the other one in C++. The &#x0201c;C++ side&#x0201d; implements the algorithm described in <xref ref-type="sec" rid="sec2dot1-sensors-15-21204">Section 2.1</xref> using the OpenCV library, offering a ready-to-use compiled library. On the other hand, the &#x0201c;Java side&#x0201d; implements the whole application with the exception of the &#x0201c;<italic>ad hoc</italic>&#x0201d; developed functions. Hence, it implements the main application&#x02019;s body and the graphical user interface; it is in charge of coordinating tasks; it calls the Android camera application for taking an image; it is responsible for appropriately storing the results, <italic>etc.</italic> When an image is captured on the &#x0201c;Java side&#x0201d; and its analysis is required, this is requests the &#x0201c;C++ side&#x0201d;. Nevertheless, the direct communication between both blocks was unfeasible, and the use of the Java Native Interface (JNI) for allowing this interaction was required. This way, the &#x0201c;Java side&#x0201d; invokes the desired functionality through JNI, which is really in charge of executing the C++ library and returning the results.</p></sec><sec id="sec2dot3-sensors-15-21204"><title>2.3. Application&#x02019;s Performance Description</title><p>vitisFlower<sup>&#x000ae;</sup> was designed to be used by all kinds of smartphone users. It was achieved by means of the following two decisions:
<list list-type="bullet"><list-item><p>Implementation of a simple and friendly graphical user interface: the interface shows only the relevant information to the user, preferably by using symbols or illustrations instead of descriptive text.</p></list-item><list-item><p>Linear execution: the application has a user-independent execution line in which the user is exempted from making any important decision. It allows the user to utilize the application without any knowledge about its internal performance.</p></list-item></list></p><p><xref ref-type="fig" rid="sensors-15-21204-f003">Figure 3</xref> shows an illustrated flow-chart diagram of the application, in which the different stages can be described as:
<list list-type="order"><list-item><p>Home: the application shows the vitisFlower<sup>&#x000ae;</sup> logo along with basic information about the aims and authorship.</p></list-item><list-item><p>Instructions for image capture: the application briefly informs the user of some basic notions for appropriately taking a photo.</p></list-item><list-item><p>Image capture: the camera application available in the user&#x02019;s Android device is invoked to make a capture. If the camera application is properly configured, it shows the captured image and allows one to discard it to take a new one in case the previous one was not properly acquired, for example because of the presence of leaves in the image, or due to the fact that the scene was not correctly focused, or it was overexposed.</p></list-item><list-item><p>Image analysis: this state is transparent to the user. It is in charge of analyzing the image taken in the previous state for detecting and counting flowers. For reducing the computational workload, the image is scaled down to a resolution of 2 Mpx prior to its analysis.</p></list-item><list-item><p>Results display: the results of the image analysis are presented to the user. On the one hand, the image with the detected flowers marked with red crosses is displayed. It easily allows one to graphically inspect the obtained results. On the other hand, the number of detected flowers is also shown. At this point, the user decides to save the results or to discard them if they are not satisfactory.</p></list-item><list-item><p>Image storage: this stage is reached if the user decided to save the results in the previous step. The processed image is saved in a folder called &#x0201c;VitisFlowerImages&#x0201d; created by the application and located in the root folder of the device&#x02019;s internal storage. The image is saved and named as follows [name]_[date]_[detected number of flowers].jpg, where:
<list list-type="bullet"><list-item><p>[name]: a dialog box allowing one to insert an image name. If it is omitted, this field takes the value &#x0201c;image&#x0201d;.</p></list-item><list-item><p>[date]: the complete date of the image capture with the following format and information: day-month-year_hour.minutes.seconds.miliseconds.</p></list-item><list-item><p>[detected number of flowers]: the number of flowers detected in the image.</p></list-item></list></p></list-item></list></p><p>Additionally, the user can read the complete information about the application&#x02019;s copyright and technical issues by clicking the icon composed of three white dots located in the upper-right corner of the window (see any application&#x02019;s screenshot in <xref ref-type="fig" rid="sensors-15-21204-f003">Figure 3</xref> to identify this icon).</p><fig id="sensors-15-21204-f003" position="float"><label>Figure 3</label><caption><p>Flow-chart diagram of the vitisFlower<sup>&#x000ae;</sup> application illustrated with the application&#x02019;s screenshots.</p></caption><graphic xlink:href="sensors-15-21204-g003"/></fig></sec><sec id="sec2dot4-sensors-15-21204"><title>2.4. Testing and Validation of the Application</title><sec id="sec2dot4dot1-sensors-15-21204"><title>2.4.1. Application&#x02019;s Performance Evaluation</title><p>The application&#x02019;s performance was evaluated with a double purpose: the assessment of its ability to accurately detect flowers and the comparison of its performance using the smartphone&#x02019;s cameras. To achieve these goals, an experiment using 2 devices of different capabilities was designed. The vitisFlower<sup>&#x000ae;</sup> application was installed on a high-end and a mid-range device; the Sony Xperia Z2 (Sony Corp., Tokyo, Japan) and BQ Aquaris E5 (Mundo Reader S.L., Madrid, Spain), respectively (see <xref ref-type="table" rid="sensors-15-21204-t001">Table 1</xref> for the features of both smartphones relevant to this experiment). These devices were separately used to acquire and analyze 70 images of 7 different grapevine varieties (10 images per variety), producing a total of 140 analyzed images. The considered varieties were: Airen, Cabernet Sauvignon, Chardonnay, Grenache, Riesling, Syrah, Tempranillo, Merlot, Chenin Blanc, Sauvignon Blanc and Semillon. The images were taken at pre-flowering stage denoted as BBCH 55, according to the scale of Lorenz <italic>et al.</italic> [<xref rid="B25-sensors-15-21204" ref-type="bibr">25</xref>], in a grapevine variety collection located in the experimental vineyards of the &#x0201c;Instituto de Ciencias de la Vid y el Vino&#x0201d; (Logro&#x000f1;o, Spain). Then, the produced outcomes were evaluated using the following metrics based on contingency tables for binary classification:
<disp-formula id="FD1"><label>(1)</label><mml:math id="mm1"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:mi>T</mml:mi><mml:mi>P</mml:mi></mml:mrow><mml:mrow><mml:mi>T</mml:mi><mml:mi>P</mml:mi><mml:mo>+</mml:mo><mml:mi>F</mml:mi><mml:mi>N</mml:mi></mml:mrow></mml:mfrac><mml:mo>;</mml:mo><mml:mi>P</mml:mi><mml:mi>C</mml:mi><mml:mo>=</mml:mo><mml:mfrac><mml:mrow><mml:mi>T</mml:mi><mml:mi>P</mml:mi></mml:mrow><mml:mrow><mml:mi>T</mml:mi><mml:mi>P</mml:mi><mml:mo>+</mml:mo><mml:mi>F</mml:mi><mml:mi>P</mml:mi></mml:mrow></mml:mfrac></mml:mrow></mml:math></disp-formula></p><table-wrap id="sensors-15-21204-t001" position="float"><object-id pub-id-type="pii">sensors-15-21204-t001_Table 1</object-id><label>Table 1</label><caption><p>Main relevant features of the 2 devices used for evaluating the performance of the vitisFlower application.</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center" valign="middle" style="border-top:solid thin" rowspan="1" colspan="1">
</th><th align="center" valign="middle" style="border-top:solid thin" rowspan="1" colspan="1">Feature</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Price/Release Date</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Sensor Model</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Resolution</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Lens Size</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Aperture</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">ISO</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Device</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">
</th></tr></thead><tbody><tr><td colspan="2" align="center" valign="middle" rowspan="1"><bold>Sony Xperia Z2</bold></td><td align="center" valign="middle" rowspan="1" colspan="1">549.0 &#x020ac;/2014</td><td align="center" valign="middle" rowspan="1" colspan="1">Sony IMX220</td><td align="center" valign="middle" rowspan="1" colspan="1">20.7 Mpx</td><td align="center" valign="middle" rowspan="1" colspan="1">1/2.3&#x02033;</td><td align="center" valign="middle" rowspan="1" colspan="1">f/2.0</td><td align="center" valign="middle" rowspan="1" colspan="1">50&#x02013;800</td></tr><tr><td colspan="2" align="center" valign="middle" style="border-bottom:solid thin" rowspan="1"><bold>BQ Aquaris E5</bold></td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">209.90 &#x020ac;/2014</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Sony IMX214</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">13 Mpx</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1/3.2&#x02033;</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">f/2.2</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">100&#x02013;1600</td></tr></tbody></table></table-wrap><p>Metric <italic>RC</italic> denotes <italic>Recall</italic>, which provides the percentage of actual flowers detected by the algorithm, whereas <italic>PC</italic> stands for <italic>Precision</italic>, which calculates the percentage of flowers correctly detected. For allowing the calculation of these metrics, a gold standard set was created. It was performed by manually labelling flowers on each of the 140 images acquired with both smartphones, making use of a PC software specifically developed in MATLAB (MatlabR2010b, MathWorks, Natick, MA, USA) to this effect. Thus, true positives (<italic>TP</italic>), false positives (<italic>FP</italic>) and false negatives (<italic>FN</italic>) were calculated and annotated per image as follows:
<list list-type="bullet"><list-item><p><italic>TP</italic>: the number of flowers automatically detected corresponding to the actual flowers labelled in the gold standard.</p></list-item><list-item><p><italic>FP</italic>: the number of flowers automatically detected that do not correspond to actual flowers in the gold standard. Redundant <italic>TP</italic>s (a redundant true positive is when a flower is detected more than once) were also considered as <italic>FPs</italic>.</p></list-item><list-item><p><italic>FN</italic>: the number of actual flowers labelled in the gold standard that were not automatically found.</p></list-item></list></p></sec><sec id="sec2dot4dot2-sensors-15-21204"><title>2.4.2. Application&#x02019;s Computational Efficiency Study</title><p>The usability of the application is highly influenced by the time it takes to analyze an image. Moreover, its accessibility is strengthened if this computation time does not exceed reasonably values for a wide range of smartphones. Therefore, to evaluate these attributes, the application was tested from a computational point of view. This study basically consisted of studying the computation time consumed by 4 smartphones with different hardware and software configurations for analyzing the same set of images. The devices were selected to cover a wide range of the market&#x02019;s spectrum in terms of price and performance; the selected ones were: the Sony Xperia Z2, Sony Xperia Z2 Tablet, BQ Aquaris E5 and Motorola Moto G (2013 version) (Motorola Mobility, IL, USA). <xref ref-type="table" rid="sensors-15-21204-t002">Table 2</xref> shows the features relevant for this study of the 4 selected devices.</p><p>To accomplish a rigorous and accurate comparison, all devices analyzed exactly the same images. Fifty inflorescence images were acquired with the Sony Xperia Z2 using the common Android camera application. Then, a simplified version of the application excluding the image capture and storage features was implemented. Basically, this version only included a simple home page with a single button for running the test. Upon test starting, the application iteratively analyzed the 50 images (stored in the device&#x02019;s internal storage), registering the time taken for each one.</p><table-wrap id="sensors-15-21204-t002" position="float"><object-id pub-id-type="pii">sensors-15-21204-t002_Table 2</object-id><label>Table 2</label><caption><p>Main relevant features of the 4 devices used for evaluating the computational efficiency of the vitisFlower application.</p></caption><table frame="hsides" rules="groups"><thead><tr><th align="center" valign="middle" style="border-top:solid thin" rowspan="1" colspan="1">
</th><th align="center" valign="middle" style="border-top:solid thin" rowspan="1" colspan="1">Feature</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Price/Release Date</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Chipset</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">CPU</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">GPU</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">RAM Memory</th><th rowspan="2" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" colspan="1">Android Version</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Device</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">
</th></tr></thead><tbody><tr><td colspan="2" align="center" valign="middle" style="border-bottom:solid thin" rowspan="1"><bold>Sony Xperia Z2</bold></td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">549.0 &#x020ac;/2014</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Qualcomm MSM8974AB Snapdragon 801</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Quad-core 2.3-GHz Krait 400</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Adreno 330</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">3 GB</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">5.0.1 Jelly bean</td></tr><tr><td colspan="2" align="center" valign="middle" style="border-bottom:solid thin" rowspan="1"><bold>Sony Xperia Z2 Tablet</bold></td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">449.0 &#x020ac;/2014</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Qualcomm MSM8974AB Snapdragon 801</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Quad-core 2.3-GHz Krait 400</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Adreno 330</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">3 GB</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">4.4.4 Kit kat</td></tr><tr><td colspan="2" align="center" valign="middle" style="border-bottom:solid thin" rowspan="1"><bold>BQ Aquaris E5</bold></td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">209.90 &#x020ac;/2014</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">MediaTek MT6582</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Quad-core 1.3-GHz ARM Cortex-A7</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Mali-400 MP2</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1 GB</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">4.4 Kit kat</td></tr><tr><td colspan="2" align="center" valign="middle" style="border-bottom:solid thin" rowspan="1"><bold>Motorola Moto G</bold></td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">172.0 &#x020ac;/2013</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Qualcomm MSM8226 Snapdragon 400</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Quad-core 1.2-GHz Cortex-A7</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Adreno 305</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">1 GB</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">4.4.2 Kit kat</td></tr></tbody></table></table-wrap><p>The acquired set of 50 images and the benchmarking version of the vitisFlower<sup>&#x000ae;</sup> application were used to compare its computation time running on the devices detailed in <xref ref-type="table" rid="sensors-15-21204-t002">Table 2</xref>. For standardizing the state of the smartphones and minimizing the interference of other applications or services installed on them, the following testing protocol was defined and followed for carrying out the test:
<list list-type="order"><list-item><p>Closing all recent applications in the device.</p></list-item><list-item><p>Selection of the flight mode.</p></list-item><list-item><p>Re-starting the device.</p></list-item><list-item><p>Waiting for 20 s for the operating system to completely load.</p></list-item><list-item><p>Starting the benchmarking version of vitisFlower.</p></list-item><list-item><p>Running the tests 5 times.</p></list-item></list></p><p>Once the test was finished, the application generated 5 files, including the measured computation time for each image in each of the 5 iterations. Finally, the definitive computation time for an image was calculated as the average time taken for its analysis in the 5 performed iterations.</p></sec></sec></sec><sec id="sec3-sensors-15-21204"><title>3. Results and Discussion</title><sec id="sec3dot1-sensors-15-21204"><title>3.1. Results of Performance Evaluation</title><p><xref ref-type="table" rid="sensors-15-21204-t003">Table 3</xref> shows the results obtained with the 2 smartphones detailed in <xref ref-type="table" rid="sensors-15-21204-t001">Table 1</xref> in terms of average <italic>Recall</italic> (<inline-formula><mml:math id="mm2"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula>) and <italic>Precision</italic> (<inline-formula><mml:math id="mm3"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>R</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula>) following the testing methodology described in <xref ref-type="sec" rid="sec2dot4dot1-sensors-15-21204">Section 2.4.1</xref>. Results are given in detail per variety. The overall results obtained with both devices (see <xref ref-type="fig" rid="sensors-15-21204-f004">Figure 4</xref>) indicated that more than 84% of flowers in the images were identified, producing less than 6% of detection errors. Furthermore, the dispersion of <inline-formula><mml:math id="mm4"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula> and <inline-formula><mml:math id="mm5"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>R</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula> values measured per variety and graphically represented in <xref ref-type="fig" rid="sensors-15-21204-f004">Figure 4</xref> indicated a good stability of the application&#x02019;s behavior for all of them. In this respect, only the <inline-formula><mml:math id="mm6"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula> value obtained by the BQ Aquaris E5 on Chenin Blanc was lower than the values achieved for other cultivars, which may be explained by non-optimum acquisition conditions and potentially by the huge degree of compactness of the flower buttons of this cultivar at this phenological stage. In this regard, the usage of the application in the field and the analysis of the acquired images led to delineating the image acquisition settings that yielded the best application behavior. These include:
<list list-type="bullet"><list-item><p>Analyzing inflorescences facing the Sun. The opposite orientation leads to light reflection and refraction patterns that can negatively affect the results.</p></list-item><list-item><p>Casting a shadow on the inflorescence to create a homogeneous scene. If the illumination is poor due to low natural-light conditions, the use of the camera flash is recommended.</p></list-item></list></p><table-wrap id="sensors-15-21204-t003" position="float"><object-id pub-id-type="pii">sensors-15-21204-t003_Table 3</object-id><label>Table 3</label><caption><p>Performance evaluation of vitisFlower<sup>&#x000ae;</sup> using 2 different devices. The average <italic>Recall</italic> (<inline-formula><mml:math id="mm11"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula>) and <italic>Precision</italic> (<inline-formula><mml:math id="mm12"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>R</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula>) calculated from the 10 images in each grapevine variety are given.</p></caption><table frame="hsides" rules="groups"><thead><tr><th colspan="3" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">Sony Xperia Z2</th><th colspan="3" align="center" valign="middle" style="border-top:solid thin;border-bottom:solid thin" rowspan="1">BQ Aquaris E5</th></tr><tr><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Variety</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1"><inline-formula><mml:math id="mm7"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula></th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1"><inline-formula><mml:math id="mm8"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>R</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula></th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Variety</th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1"><inline-formula><mml:math id="mm9"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula></th><th align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1"><inline-formula><mml:math id="mm10"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>R</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula></th></tr></thead><tbody><tr><td align="center" valign="middle" rowspan="1" colspan="1">Airen</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8223</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9787</td><td align="center" valign="middle" rowspan="1" colspan="1">Merlot</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9173</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9517</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">Cabernet Sauvignon</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8363</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9615</td><td align="center" valign="middle" rowspan="1" colspan="1">Cabernet Sauvignon</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8855</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9531</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">Chardonnay</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8770</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9339</td><td align="center" valign="middle" rowspan="1" colspan="1">Chenin Blanc</td><td align="center" valign="middle" rowspan="1" colspan="1">0.7987</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9563</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">Grenache</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8045</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9763</td><td align="center" valign="middle" rowspan="1" colspan="1">Grenache</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8391</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9685</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">Riesling</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8411</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9458</td><td align="center" valign="middle" rowspan="1" colspan="1">Riesling</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9035</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9212</td></tr><tr><td align="center" valign="middle" rowspan="1" colspan="1">Syrah</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8889</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9376</td><td align="center" valign="middle" rowspan="1" colspan="1">Sauvignon Blanc</td><td align="center" valign="middle" rowspan="1" colspan="1">0.8664</td><td align="center" valign="middle" rowspan="1" colspan="1">0.9557</td></tr><tr><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Tempranillo</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">0.8308</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">0.9851</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">Semillon</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">0.8826</td><td align="center" valign="middle" style="border-bottom:solid thin" rowspan="1" colspan="1">0.9158</td></tr></tbody></table></table-wrap><p>The Sony Xperia Z2 comprises a camera sensor and a lens, which are technically more advanced than those of the BQ Aquaris E5. As can be seen in <xref ref-type="table" rid="sensors-15-21204-t001">Table 1</xref>, the Xperia smartphone offers a sensor with higher image resolution, as well as a lens with a wider size and aperture. These features allow this device to produce less noise and better defined images than those captured by the BQ. Nevertheless, comparing the results obtained with both smartphones, it can be concluded that technical differences between them did not affect the application&#x02019;s performance. Furthermore, the results obtained with the BQ device were slightly higher in terms of <inline-formula><mml:math id="mm13"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula> than those obtained with the smartphone from Sony. This outstanding result indicates that the vitisFlower<sup>&#x000ae;</sup> application can be satisfactorily used, at least with smartphones in the mid-range, like the BQ Aquaris E5 and above. Moreover, since performance degradation has not been detected with this device, good results may be surely obtained, even with more modest smartphones.</p><fig id="sensors-15-21204-f004" position="float"><label>Figure 4</label><caption><p>Box and whisker comparison plots for the Sony Xperia Z2 and the BQ Aquaris E5: (<bold>a</bold>) performance in terms of average <italic>Recall</italic> (<inline-formula><mml:math id="mm14"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>R</mml:mi><mml:mi>C</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula>); (<bold>b</bold>) performance comparison in terms of average <italic>Precision</italic> (<inline-formula><mml:math id="mm15"><mml:mrow><mml:mover accent="true"><mml:mrow><mml:mi>P</mml:mi><mml:mi>R</mml:mi></mml:mrow><mml:mo stretchy="true">&#x000af;</mml:mo></mml:mover></mml:mrow></mml:math></inline-formula>).</p></caption><graphic xlink:href="sensors-15-21204-g004"/></fig></sec><sec id="sec3dot2-sensors-15-21204"><title>3.2. Results of the Study of Computational Efficiency</title><p><xref ref-type="fig" rid="sensors-15-21204-f005">Figure 5</xref> illustrates the results obtained in the experiment specified in <xref ref-type="sec" rid="sec2dot4dot2-sensors-15-21204">Section 2.4.2</xref> for evaluating the computational efficiency of the vitisFlower<sup>&#x000ae;</sup> application running on the four devices listed in <xref ref-type="table" rid="sensors-15-21204-t002">Table 2</xref>.</p><fig id="sensors-15-21204-f005" position="float"><label>Figure 5</label><caption><p>(<bold>a</bold>) Average and standard deviation of computation time for four different devices measured on the analysis of 50 images; (<bold>b</bold>) box and whisker plots for the same experiment shown in (<bold>a</bold>).</p></caption><graphic xlink:href="sensors-15-21204-g005"/></fig><p>As expected, the Sony Xperia Z2 and Sony Xperia Z2 Tablet offered the best computational time distribution. The performance of these devices was high and virtually equal, with an average and standard deviation time of around 6.5 and 2.6 s, respectively. Since they were equipped with the same computational hardware, but different Android versions, this result reveals that the differences between both versions did not affect the application&#x02019;s efficiency. On the other hand, the performance of the other two devices tested was considerably poorer. Despite this, the measured computational time for both devices (between 10 and 20 s) can be considered acceptable for allowing normal use of the application. Indeed, the BQ Aquaris E5 and Motorola Moto G (2013 version) took 13.27 and 16.83 s on average for analyzing the 50 images with a standard deviation of 5.48 and 7.01 s, respectively. Furthermore, according to the complete outcomes represented in <xref ref-type="fig" rid="sensors-15-21204-f005">Figure 5</xref>b by a box and whisker plot, 75% of the images were analyzed by the BQ Aquaris E5 in less than 16.24 s and by the Motorola Moto G (2013 version) in less than 20.64 s.</p></sec><sec id="sec3dot3-sensors-15-21204"><title>3.3. Significance of the vitisFlower<sup>&#x000ae;</sup> Application for the Wine Industry</title><p>Flowering and fruit-set are the main determinants of grapevine yield, and fruit-set rates may be impacted by many viticultural practices, including late pruning [<xref rid="B14-sensors-15-21204" ref-type="bibr">14</xref>], shoot tipping [<xref rid="B26-sensors-15-21204" ref-type="bibr">26</xref>], topping [<xref rid="B15-sensors-15-21204" ref-type="bibr">15</xref>], early defoliation [<xref rid="B16-sensors-15-21204" ref-type="bibr">16</xref>] and spray applications of growth regulators and nutrients [<xref rid="B19-sensors-15-21204" ref-type="bibr">19</xref>,<xref rid="B27-sensors-15-21204" ref-type="bibr">27</xref>]. Despite its importance, limited flower counting and fruit-set estimation are currently carried out in commercial vineyards, as manual flower counting is very laborious and destructive. However, the possibility of doing it in a fast and non-destructive way, such as with the vitisFlower<sup>&#x000ae;</sup> application, may pave the way for the early estimation of yield by the assessment of the fruit-set rates. The knowledge of this variable can help to estimate the final yield at harvest prior to bunch closure. This yield forecast can be very valuable for making decisions on vineyard management to optimize the grapevine balance between vegetative and reproductive growth and to prepare growers and wineries for the harvest operation, including scheduling and arrangements of shipping, storing, processing and trading the crop [<xref rid="B28-sensors-15-21204" ref-type="bibr">28</xref>].</p><p>In the last few years, smart devices&#x02019; user penetration has increased exponentially worldwide, and the development of applications for a wide range of uses has grown in parallel. The user&#x02019;s penetration percentage had surpassed 70% by June 2014 in many wine producing countries [<xref rid="B29-sensors-15-21204" ref-type="bibr">29</xref>], where grape growers and farmers have adopted smartphones for their routine duties. For this reason, the development of agriculture-oriented applications, such as vitisFlower<italic><sup>&#x000ae;</sup></italic>, to provide fast and in-field, non-invasive assessment of agronomical and physiological information of the grapevines may become decision support tools for vineyard management.</p></sec></sec><sec id="sec4-sensors-15-21204"><title>4. Conclusions/Outlook</title><p>This paper presents an innovative smartphone Android application, called vitisFlower<sup>&#x000ae;</sup>, that provides the worldwide wine industry with a powerful tool for easily and automatically assessing flowering in the vineyard and providing useful information for yield estimation at early stages. The results of the experimentation developed in this paper demonstrate that even with modest devices, the application can be efficiently and reliably used at high rates of applicability and performance.</p><p>vitisFlower<sup>&#x000ae;</sup> is currently freely available in Spanish, English and French via Google Play [<xref rid="B30-sensors-15-21204" ref-type="bibr">30</xref>], being one of the first viticulture smartphone applications available worldwide The development of friendly, non-invasive applications for viticulture and other agricultural fields opens a new and profitable window for the implementation of precision agriculture strategies, aimed at optimizing the management according to the field variability.</p></sec></body><back><ack><title>Acknowledgments</title><p>The authors would like to thank the Agencia de Desarrollo Econ&#x000f3;mico de La Rioja (ADER) agency of the La Rioja regional government and the Spanish Ministry of Economy and Competitiveness for funding the projects VINETICS and AGL2011-23673, respectively. The authors also thank Marjolaine Chatin and Actylab for their help and support.</p></ack><notes><title>Author Contributions</title><p>Arturo Aquino, Borja Millan and Daniel Gaston designed, implemented and tested the application. Mar&#x000ed;a-Paz Diago, Borja Millan and Javier Tardaguila developed and tested the original image analysis algorithm. Javier Tardaguila led and supervised the group from the beginning of the presented work. The original idea was conceived of by Javier Tardaguila, Mar&#x000ed;a-Paz Diago and Borja Millan.</p></notes><notes><title>Conflicts of Interest</title><p>The authors declare no conflict of interest.</p></notes><ref-list><title>References</title><ref id="B1-sensors-15-21204"><label>1.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Nuske</surname><given-names>S.</given-names></name><name><surname>Achar</surname><given-names>S.</given-names></name><name><surname>Bates</surname><given-names>T.</given-names></name><name><surname>Narasimhan</surname><given-names>S.</given-names></name><name><surname>Singh</surname><given-names>S.</given-names></name></person-group>
<article-title>Yield Estimation in Vineyards by Visual Grape Detection</article-title>
<source>Proceedings of the IEEE/RSJ International Conference on Intelligent Robots and Systems (IROS)</source>
<conf-loc>San Francisco, CA, USA</conf-loc>
<conf-date>25&#x02013;30 September 2011</conf-date>
<fpage>2352</fpage>
<lpage>2358</lpage>
</element-citation></ref><ref id="B2-sensors-15-21204"><label>2.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Nuske</surname><given-names>S.</given-names></name><name><surname>Wilshusen</surname><given-names>K.</given-names></name><name><surname>Achar</surname><given-names>S.</given-names></name><name><surname>Yoder</surname><given-names>L.</given-names></name><name><surname>Narasimhan</surname><given-names>S.</given-names></name><name><surname>Singh</surname><given-names>S.</given-names></name></person-group>
<article-title>Automated Visual Yield Estimation in Vineyards</article-title>
<source>J. Field Robot.</source>
<year>2014</year>
<volume>31</volume>
<fpage>837</fpage>
<lpage>860</lpage>
<pub-id pub-id-type="doi">10.1002/rob.21541</pub-id>
</element-citation></ref><ref id="B3-sensors-15-21204"><label>3.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Font</surname><given-names>D.</given-names></name><name><surname>Pallej&#x000e0;</surname><given-names>T.</given-names></name><name><surname>Tresanchez</surname><given-names>M.</given-names></name><name><surname>Teixid&#x000f3;</surname><given-names>M.</given-names></name><name><surname>Martinez</surname><given-names>D.</given-names></name><name><surname>Moreno</surname><given-names>J.</given-names></name><name><surname>Palac&#x000ed;n</surname><given-names>J.</given-names></name></person-group>
<article-title>Counting Red Grapes in Vineyards by Detecting Specular Spherical Reflection Peaks in RGB Images obtained at Night with Artificial Illumination</article-title>
<source>Comput. Electron. Agric.</source>
<year>2014</year>
<volume>108</volume>
<fpage>105</fpage>
<lpage>111</lpage>
<pub-id pub-id-type="doi">10.1016/j.compag.2014.07.006</pub-id>
</element-citation></ref><ref id="B4-sensors-15-21204"><label>4.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Diago</surname><given-names>M.P.</given-names></name><name><surname>Correa</surname><given-names>C.</given-names></name><name><surname>Mill&#x000e1;n</surname><given-names>B.</given-names></name><name><surname>Barreiro</surname><given-names>P.</given-names></name><name><surname>Valero</surname><given-names>C.</given-names></name><name><surname>Tardaguila</surname><given-names>J.</given-names></name></person-group>
<article-title>Grapevine Yield and Leaf Area Estimation using Supervised Classification Methodology on RGB Images Taken Under Field Conditions</article-title>
<source>Sensors</source>
<year>2012</year>
<volume>12</volume>
<fpage>16988</fpage>
<lpage>17006</lpage>
<pub-id pub-id-type="doi">10.3390/s121216988</pub-id>
<pub-id pub-id-type="pmid">23235443</pub-id></element-citation></ref><ref id="B5-sensors-15-21204"><label>5.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Roscher</surname><given-names>R.</given-names></name><name><surname>Herzog</surname><given-names>K.</given-names></name><name><surname>Kunkel</surname><given-names>A.</given-names></name><name><surname>Kicherer</surname><given-names>A.</given-names></name><name><surname>T&#x000f6;pfer</surname><given-names>R.</given-names></name><name><surname>F&#x000f6;rstner</surname><given-names>W.</given-names></name></person-group>
<article-title>Automated Image Analysis Framework for High-Throughput Determination of Grapevine Berry Sizes using Conditional Random Fields</article-title>
<source>Comput. Electron. Agric.</source>
<year>2014</year>
<volume>100</volume>
<fpage>148</fpage>
<lpage>158</lpage>
<pub-id pub-id-type="doi">10.1016/j.compag.2013.11.008</pub-id>
</element-citation></ref><ref id="B6-sensors-15-21204"><label>6.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Dunn</surname><given-names>G.M.</given-names></name><name><surname>Martin</surname><given-names>S.R.</given-names></name></person-group>
<article-title>Yield Prediction from Digital Image Analysis: A Technique with Potential for Vineyard Assessments Prior to Harvest</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>2004</year>
<volume>10</volume>
<fpage>196</fpage>
<lpage>198</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.2004.tb00022.x</pub-id>
</element-citation></ref><ref id="B7-sensors-15-21204"><label>7.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>May</surname><given-names>P.</given-names></name></person-group>
<source>Flowering and Fruitset in Grapevines</source>
<publisher-name>Phylloxera and Grape Industry Board of South Australia</publisher-name>
<publisher-loc>Adelaide, Australia</publisher-loc>
<year>2004</year>
</element-citation></ref><ref id="B8-sensors-15-21204"><label>8.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Martin</surname><given-names>S.R.</given-names></name><name><surname>Dunn</surname><given-names>G.M.</given-names></name><name><surname>Hoogenraad</surname><given-names>T.</given-names></name><name><surname>Krstic</surname><given-names>M.P.</given-names></name><name><surname>Clingeleffer</surname><given-names>P.R.</given-names></name><name><surname>Ashcroft</surname><given-names>W.J.</given-names></name></person-group>
<article-title>Crop Forecasting in Cool Climate Vineyards</article-title>
<source>Proceedings for the 5th International Symposium on Cool Climate Viticulture and Enology</source>
<conf-loc>Melbourne, Australia</conf-loc>
<conf-date>16&#x02013;20 January 2000</conf-date>
</element-citation></ref><ref id="B9-sensors-15-21204"><label>9.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Clingeleffer</surname><given-names>P.R.</given-names></name></person-group>
<article-title>Plant Management Research: Status and what it can Offer to Address Challenges and Limitations</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>2010</year>
<volume>16</volume>
<fpage>25</fpage>
<lpage>32</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.2009.00075.x</pub-id>
</element-citation></ref><ref id="B10-sensors-15-21204"><label>10.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Matthews</surname><given-names>M.</given-names></name><name><surname>Nuzzo</surname><given-names>V.</given-names></name></person-group>
<article-title>Berry Size and Yield Paradigms on Grapes and Wines Quality</article-title>
<source>Acta Hortic.</source>
<year>2007</year>
<volume>754</volume>
<fpage>423</fpage>
<lpage>436</lpage>
</element-citation></ref><ref id="B11-sensors-15-21204"><label>11.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Dry</surname><given-names>P.R.</given-names></name><name><surname>Longbottom</surname><given-names>M.L.</given-names></name><name><surname>McLoughlin</surname><given-names>S.</given-names></name><name><surname>Johnson</surname><given-names>T.E.</given-names></name><name><surname>Collins</surname><given-names>C.</given-names></name></person-group>
<article-title>Classification of Reproductive Performance of Ten Winegrape Varieties</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>2010</year>
<volume>16</volume>
<fpage>47</fpage>
<lpage>55</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.2009.00085.x</pub-id>
</element-citation></ref><ref id="B12-sensors-15-21204"><label>12.</label><element-citation publication-type="book">
<person-group person-group-type="author"><name><surname>Carbonneau</surname><given-names>A.</given-names></name><name><surname>Deloire</surname><given-names>A.</given-names></name><name><surname>Jaillard</surname><given-names>B.</given-names></name></person-group>
<source>La Vigne: Physiologie, Terroir, Culture</source>
<publisher-name>Dunod</publisher-name>
<publisher-loc>Paris, France</publisher-loc>
<year>2007</year>
</element-citation></ref><ref id="B13-sensors-15-21204"><label>13.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Coombe</surname><given-names>B.</given-names></name></person-group>
<article-title>The Effect of Removing Leaves, Flowers and Shoot Tips on Fruit-Set in <italic>Vitis Vinifera</italic> L</article-title>
<source>J. Hortic. Sci.</source>
<year>1962</year>
<volume>37</volume>
<fpage>1</fpage>
<lpage>15</lpage>
</element-citation></ref><ref id="B14-sensors-15-21204"><label>14.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Friend</surname><given-names>A.P.</given-names></name><name><surname>Trought</surname><given-names>M.C.T.</given-names></name></person-group>
<article-title>Delayed Winter Spur-Pruning in New Zealand can Alter Yield Components of Merlot Grapevines</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>2007</year>
<volume>13</volume>
<fpage>157</fpage>
<lpage>164</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.2007.tb00246.x</pub-id>
</element-citation></ref><ref id="B15-sensors-15-21204"><label>15.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Collins</surname><given-names>C.</given-names></name><name><surname>Dry</surname><given-names>P.R.</given-names></name></person-group>
<article-title>Response of Fruitset and Other Yield Components to Shoot Topping and 2-Chlorethyltrimethyl-Ammonium Chloride Application</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>2009</year>
<volume>15</volume>
<fpage>256</fpage>
<lpage>267</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.2009.00063.x</pub-id>
</element-citation></ref><ref id="B16-sensors-15-21204"><label>16.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Poni</surname><given-names>S.</given-names></name><name><surname>Casalini</surname><given-names>L.</given-names></name><name><surname>Bernizzoni</surname><given-names>F.</given-names></name><name><surname>Civardi</surname><given-names>S.</given-names></name><name><surname>Intrieri</surname><given-names>C.</given-names></name></person-group>
<article-title>Effects of Early Defoliation on Shoot Photosynthesis, Yield Components, and Grape Composition</article-title>
<source>Am. J. Enol. Vitic.</source>
<year>2006</year>
<volume>57</volume>
<fpage>397</fpage>
<lpage>407</lpage>
</element-citation></ref><ref id="B17-sensors-15-21204"><label>17.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Brown</surname><given-names>K.</given-names></name><name><surname>Jackson</surname><given-names>D.I.</given-names></name><name><surname>Steans</surname><given-names>G.F.</given-names></name></person-group>
<article-title>Effects of Chlormequat, Girdling, and Tipping on Berry Set in Vitis Vinifera L</article-title>
<source>Am. J. Enol. Vitic.</source>
<year>1988</year>
<volume>39</volume>
<fpage>91</fpage>
<lpage>94</lpage>
</element-citation></ref><ref id="B18-sensors-15-21204"><label>18.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Coombe</surname><given-names>B.</given-names></name></person-group>
<article-title>Fruit Set in Grape Vines: The Mechanism of the CCC Effect</article-title>
<source>J. Hortic. Sci.</source>
<year>1970</year>
<volume>45</volume>
<fpage>415</fpage>
<lpage>425</lpage>
</element-citation></ref><ref id="B19-sensors-15-21204"><label>19.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Longbottom</surname><given-names>M.L.</given-names></name><name><surname>Dry</surname><given-names>P.R.</given-names></name><name><surname>Sedgley</surname><given-names>M.</given-names></name></person-group>
<article-title>A Research Note on the Occurrence of &#x0201c;Star&#x0201d; Flowers in Grapevines: Observations during the 2003&#x02013;2004 Growing Season</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>2004</year>
<volume>10</volume>
<fpage>199</fpage>
<lpage>202</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.2004.tb00023.x</pub-id>
</element-citation></ref><ref id="B20-sensors-15-21204"><label>20.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>De Bei</surname><given-names>R.</given-names></name><name><surname>Hook</surname><given-names>J.</given-names></name><name><surname>Fuentes</surname><given-names>S.</given-names></name><name><surname>Gilliham</surname><given-names>M.</given-names></name><name><surname>Tyerman</surname><given-names>S.</given-names></name><name><surname>Collins</surname><given-names>C.</given-names></name></person-group>
<article-title>Linking Canopy Architecture to Grape Quality using the LAI Canopy App</article-title>
<source>Proceedings of the 19th International Meeting of Viticulture GIESCO</source>
<conf-loc>Montpellier, France</conf-loc>
<conf-date>31 May 2015</conf-date>
<fpage>585</fpage>
<lpage>588</lpage>
</element-citation></ref><ref id="B21-sensors-15-21204"><label>21.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Fuentes</surname><given-names>S.</given-names></name><name><surname>de Bei</surname><given-names>R.</given-names></name><name><surname>Pozo</surname><given-names>C.</given-names></name><name><surname>Tyerman</surname><given-names>S.</given-names></name></person-group>
<article-title>Development of a Smartphone Application to Characterise Temporal and Spatial Canopy Architecture and Leaf Area Index for Grapevines</article-title>
<source>Wine Vitic. J.</source>
<year>2012</year>
<volume>27</volume>
<fpage>56</fpage>
<lpage>60</lpage>
</element-citation></ref><ref id="B22-sensors-15-21204"><label>22.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Diago</surname><given-names>M.P.</given-names></name><name><surname>Sanz-Garcia</surname><given-names>A.</given-names></name><name><surname>Millan</surname><given-names>B.</given-names></name><name><surname>Blasco</surname><given-names>J.</given-names></name><name><surname>Tardaguila</surname><given-names>J.</given-names></name></person-group>
<article-title>Assessment of Flower Number Per Inflorescence in Grapevine by Image Analysis Under Field Conditions</article-title>
<source>J. Sci. Food Agric.</source>
<year>2014</year>
<volume>94</volume>
<fpage>1981</fpage>
<lpage>1987</lpage>
<pub-id pub-id-type="doi">10.1002/jsfa.6512</pub-id>
<pub-id pub-id-type="pmid">24302287</pub-id></element-citation></ref><ref id="B23-sensors-15-21204"><label>23.</label><element-citation publication-type="webpage">
<article-title>IDC: Smartphone OS Market Share 2015, 2014, 2013, and 2012</article-title>
<comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://www.idc.com/prodserv/smartphone-os-market-share.jsp">http://www.idc.com/prodserv/smartphone-os-market-share.jsp</ext-link></comment>
<date-in-citation>(accessed on 13 August 2015)</date-in-citation>
</element-citation></ref><ref id="B24-sensors-15-21204"><label>24.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Connolly</surname><given-names>C.</given-names></name><name><surname>Fliess</surname><given-names>T.</given-names></name></person-group>
<article-title>A study of efficiency and accuracy in the transformation from RGB to CIELAB color space</article-title>
<source>IEEE Trans. Image Process.</source>
<year>1997</year>
<volume>6</volume>
<fpage>1046</fpage>
<lpage>1047</lpage>
<pub-id pub-id-type="doi">10.1109/83.597279</pub-id>
<pub-id pub-id-type="pmid">18282994</pub-id></element-citation></ref><ref id="B25-sensors-15-21204"><label>25.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Lorenz</surname><given-names>D.H.</given-names></name><name><surname>Eichhorn</surname><given-names>K.W.</given-names></name><name><surname>Bleiholder</surname><given-names>H.</given-names></name><name><surname>Klose</surname><given-names>R.</given-names></name><name><surname>Meier</surname><given-names>U.</given-names></name><name><surname>Weber</surname><given-names>E.</given-names></name></person-group>
<article-title>Growth Stages of the Grapevine: Phenological Growth Stages of the Grapevine (Vitis Vinifera L. Ssp. Vinifera)? Codes and Descriptions According to the Extended BBCH Scale?</article-title>
<source>Aust. J. Grape Wine Res.</source>
<year>1995</year>
<volume>1</volume>
<fpage>100</fpage>
<lpage>103</lpage>
<pub-id pub-id-type="doi">10.1111/j.1755-0238.1995.tb00085.x</pub-id>
</element-citation></ref><ref id="B26-sensors-15-21204"><label>26.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Skene</surname><given-names>K.</given-names></name></person-group>
<article-title>A Comparison of Effects of Cycocel and Tipping on Fruit Set in <italic>Vitis Vinifera</italic> L</article-title>
<source>Aust. J. Biol. Sci.</source>
<year>1969</year>
<volume>22</volume>
<fpage>1305</fpage>
<lpage>1312</lpage>
</element-citation></ref><ref id="B27-sensors-15-21204"><label>27.</label><element-citation publication-type="journal">
<person-group person-group-type="author"><name><surname>Christensen</surname><given-names>P.</given-names></name></person-group>
<article-title>Timing of Zinc Foliar Sprays. I. Effects of Application Intervals Preceding and during the Bloom and Fruit-Set Stages. II. Effects of Day VS. Night Application</article-title>
<source>Am. J. Enol. Vitic.</source>
<year>1980</year>
<volume>31</volume>
<fpage>53</fpage>
<lpage>59</lpage>
</element-citation></ref><ref id="B28-sensors-15-21204"><label>28.</label><element-citation publication-type="confproc">
<person-group person-group-type="author"><name><surname>Dunn</surname><given-names>G.M.</given-names></name><name><surname>Martin</surname><given-names>S.R.</given-names></name></person-group>
<article-title>The Current Status of Crop Forecasting in the Australian Wine Industry</article-title>
<source>Proceedings of the ASVO Seminar Series: Grapegrowing at the Edge</source>
<conf-loc>Tanunda, Barossa Valley, South Australia</conf-loc>
<conf-date>10 July 2003</conf-date>
<fpage>4</fpage>
<lpage>8</lpage>
</element-citation></ref><ref id="B29-sensors-15-21204"><label>29.</label><element-citation publication-type="webpage">
<article-title>Mobile Penetration in Spain &#x00026; Digital Users</article-title>
<comment>Available online: <ext-link ext-link-type="uri" xlink:href="http://www.neomobile-blog.com/spain-2015-mobile-market-digital-user-habits/">http://www.neomobile-blog.com/spain-2015-mobile-market-digital-user-habits/</ext-link></comment>
<date-in-citation>(accessed on 13 August 2015)</date-in-citation>
</element-citation></ref><ref id="B30-sensors-15-21204"><label>30.</label><element-citation publication-type="webpage">
<article-title>Google Play</article-title>
<comment>Available online: <ext-link ext-link-type="uri" xlink:href="https://play.google.com/store/apps/details?id=com.ur.android.grapegenius">https://play.google.com/store/apps/details?id=com.ur.android.grapegenius</ext-link></comment>
<date-in-citation>(accessed on 13 August 2015)</date-in-citation>
</element-citation></ref></ref-list></back></article>